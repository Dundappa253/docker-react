language: generic
sudo: required

services:
  - docker

before_install:
  - docker build -t appa253/docker-react -f Dockerfile.dev .

script:
  - docker run -e CI=true appa253/docker-react npm run test

deploy:
  provider: elasticbeanstalk
  region: "us-west-2"
  app: "docker"
  env: "Docker-env"
  bucket: "elasticbeanstalk-us-west-2-539062601900"
  bucket_path: "docker"
  on:
    branch: master
  access_key_id: "DwDdcu2Y0K3vcRTKv4P5VyL0gBYQoJLbPeAYIW2WY/i38F7+Hv6c8lbmxHNBqlvFDbWhCd2BEu09a/T5ZHBxkG46zqlRclGgwxZb6cB2hpwXiHR+sBJX1W9m1ToKB+lIZL+3L8wxu4LyzhbVIgk6g422MNd0YiHOzc/lL6m3o4b2XxRaKa2vxuxKW0NVTQYcZMWjIyOMADxPb93MOvLiPQTypir/yEEyJK2VTRSEB+8hv1D5YHwO2qatWif8Q5olokWj3HP9L3z3Cm8UXLnwJsKbkwyAFQ4KNu0V+GEQWuyfCVxP3fuXPRwNVPcMvBhZGlsN3B/K0m0pCDsMTIfIH3oY/mYJ4gEZD2Jpom6PVJwMI0ffvafesjMyPKc3Z2NaNvGyAh5QjGeBhq+glqcYRJL/zFfote1Hb7AEcPej3cREknhXzBAEPkSz+lM9K18m7xuKDzeJ6W9v1+tyfTS2X+iBsc3c75RVsxkjoby6+dTAKMWHkkbDH3KbCCfOb6ky6dBngrHs885ycC1/1aSdET5SRMK0AUL9RTJJCmYI5cTxevuAfSDX4HvMrhJwBekrc3oUiSusTmkJCkZV6hULrZ92Q0p9fmXJDi2I9O6isFtdy9cfLHd7lQD/mXzfGGmcuGZFX5R8ReX3CBhJq87UQv8Z/JIfM5p536uF0lz1b+c="
  secret_access_key: 
    secure: "DwDdcu2Y0K3vcRTKv4P5VyL0gBYQoJLbPeAYIW2WY/i38F7+Hv6c8lbmxHNBqlvFDbWhCd2BEu09a/T5ZHBxkG46zqlRclGgwxZb6cB2hpwXiHR+sBJX1W9m1ToKB+lIZL+3L8wxu4LyzhbVIgk6g422MNd0YiHOzc/lL6m3o4b2XxRaKa2vxuxKW0NVTQYcZMWjIyOMADxPb93MOvLiPQTypir/yEEyJK2VTRSEB+8hv1D5YHwO2qatWif8Q5olokWj3HP9L3z3Cm8UXLnwJsKbkwyAFQ4KNu0V+GEQWuyfCVxP3fuXPRwNVPcMvBhZGlsN3B/K0m0pCDsMTIfIH3oY/mYJ4gEZD2Jpom6PVJwMI0ffvafesjMyPKc3Z2NaNvGyAh5QjGeBhq+glqcYRJL/zFfote1Hb7AEcPej3cREknhXzBAEPkSz+lM9K18m7xuKDzeJ6W9v1+tyfTS2X+iBsc3c75RVsxkjoby6+dTAKMWHkkbDH3KbCCfOb6ky6dBngrHs885ycC1/1aSdET5SRMK0AUL9RTJJCmYI5cTxevuAfSDX4HvMrhJwBekrc3oUiSusTmkJCkZV6hULrZ92Q0p9fmXJDi2I9O6isFtdy9cfLHd7lQD/mXzfGGmcuGZFX5R8ReX3CBhJq87UQv8Z/JIfM5p536uF0lz1b+c="
  skip_cleanup: true